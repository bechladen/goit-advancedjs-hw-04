{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '46797369-0299d472bccce8abfeee5d8f9';\nconst PER_PAGE = 15;\n\nasync function fetchImages(query, page = 1) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${PER_PAGE}&page=${page}`;\n\n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n\nexport default fetchImages;\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet lightbox;\n\nfunction initializeLightbox() {\n  lightbox = new SimpleLightbox('.gallery a', {});\n}\n\nfunction renderImages(images) {\n  const gallery = document.querySelector('.gallery');\n  const markup = images\n    .map(\n      image => `\n    <a href=\"${image.largeImageURL}\">\n      <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" title=\"${image.tags}\" />\n      <div class=\"info\">\n        <div>\n          <p class=\"main-p\">Likes</p>\n          <p class=\"add-p\">${image.likes}</p>\n        </div>\n        <div>\n          <p class=\"main-p\">Views</p>\n          <p class=\"add-p\">${image.views}</p>\n        </div>\n        <div>\n          <p class=\"main-p\">Comments</p>\n          <p class=\"add-p\">${image.comments}</p>\n        </div>\n        <div>\n          <p class=\"main-p\">Downloads</p>\n          <p class=\"add-p\">${image.downloads}</p>\n        </div>\n      </div>\n    </a>\n  `\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nfunction clearGallery() {\n  document.querySelector('.gallery').innerHTML = '';\n}\n\nfunction showLoader() {\n  document.querySelector('.loader').classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  document.querySelector('.loader').classList.add('hidden');\n}\n\nfunction showError(message) {\n  iziToast.error({ title: 'Error', message });\n}\n\nexport {\n  initializeLightbox,\n  renderImages,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showError,\n};\n","import fetchImages from './js/pixabay-api.js';\nimport {\n  renderImages,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showError,\n  initializeLightbox,\n} from './js/render-functions.js';\n\nconst form = document.querySelector('.search-form');\nconst input = document.querySelector('.search-input');\nconst loadMoreButton = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\n\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\n\ninitializeLightbox();\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  query = input.value.trim();\n  if (!query) {\n    showError('Please enter a search term');\n    return;\n  }\n\n  clearGallery();\n  page = 1;\n  loadMoreButton.classList.add('hidden');\n  showLoader();\n\n  try {\n    const data = await fetchImages(query, page);\n    hideLoader();\n\n    if (data.hits.length === 0) {\n      showError('No images found. Please try a different search query.');\n      return;\n    }\n\n    totalHits = data.totalHits;\n    renderImages(data.hits);\n    if (totalHits > data.hits.length) {\n      loadMoreButton.classList.remove('hidden');\n    }\n  } catch (error) {\n    hideLoader();\n    showError('An error occurred while fetching images');\n  }\n\n  input.value = '';\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  page += 1;\n  loadMoreButton.classList.add('hidden');\n  showLoader();\n\n  try {\n    const data = await fetchImages(query, page);\n    hideLoader();\n\n    if (data.hits.length === 0) {\n      showError('No more images available.');\n      return;\n    }\n\n    renderImages(data.hits);\n\n    const galleryCardHeight = document\n      .querySelector('.gallery a')\n      .getBoundingClientRect().height;\n    window.scrollBy({\n      top: galleryCardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    if (page * 15 >= totalHits) {\n      loadMoreButton.classList.add('hidden');\n      showError(\"We're sorry, but you've reached the end of search results.\");\n    } else {\n      loadMoreButton.classList.remove('hidden');\n    }\n  } catch (error) {\n    hideLoader();\n    showError('An error occurred while loading more images');\n  }\n});\n"],"names":["BASE_URL","API_KEY","PER_PAGE","fetchImages","query","page","url","axios","error","lightbox","initializeLightbox","SimpleLightbox","renderImages","images","gallery","markup","image","clearGallery","showLoader","hideLoader","showError","message","iziToast","form","input","loadMoreButton","totalHits","event","data","galleryCardHeight"],"mappings":"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"}